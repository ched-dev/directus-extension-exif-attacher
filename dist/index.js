"use strict";const e=[{prop:"dateTaken",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.CreateDate}},{prop:"cameraMake",getValue:e=>{var a;return null===(a=e.ifd0)||void 0===a?void 0:a.Make}},{prop:"cameraModel",getValue:e=>{var a;return null===(a=e.ifd0)||void 0===a?void 0:a.Model}},{prop:"iso",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.ISO}},{prop:"exposure",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.ExposureTime}},{prop:"aperture",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.FNumber}},{prop:"focalLength",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.FocalLength}},{prop:"focalLengthIn35mm",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.FocalLengthIn35mmFormat}},{prop:"lensMake",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.LensMake}},{prop:"lensModel",getValue:e=>{var a;return null===(a=e.exif)||void 0===a?void 0:a.LensModel}}],a=[{name:"media_library",imageFieldKey:"image",exifFields:e}];var r=({filter:r},{services:o})=>{a.map((a=>{const i=((a,r)=>async function(o,i,t){console.log(`${r.name} item:`,{item:o,meta:i,schema:t.schema});const l=r.imageFieldKey||"image",n=o.hasOwnProperty(l)?o[l]:void 0;if(n){const i=r.exifFields||e;if(i.map((e=>o[e.prop]=null)),a&&a.ItemsService){const e=new a.ItemsService("directus_files",{schema:t.schema}),l=await e.readOne(n);console.log(`${r.name} imageInfo:`,{imageInfo:l}),l&&l.metadata&&i.map((e=>{o[e.prop]=e.getValue(l.metadata)}))}console.log(`${r.name} updated item:`,{item:o})}return o})(o,a);r(`${a.name}.items.create`,i),r(`${a.name}.items.update`,i)}))};module.exports=r;
